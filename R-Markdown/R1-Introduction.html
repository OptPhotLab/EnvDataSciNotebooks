<h1 id="readme-before-starting"><em>README</em> before starting!</h1>
<p>Welcome to Environmental Data Science's introducing R session. In this session we start from scratch and assume no prior knowledge of R. We will cover the very basics of the R language. Things like Rstudio and ggplot2 will be covered in future sessions.</p>
<p>Fill in the blanks as you go to test your understanding, and keep this handy as a reference for basic terminology.</p>
<p>Used R before?</p>
<p>It could still be worth going through the whole notebook or just particular sections; there might even be something you skipped over first time round.</p>
<p>On the other hand if you understand and can explain each of the following terms and how they relate to R, then perhaps this tutorial is not for you. In this session we will go over:</p>
<ul>
<li>variable and operators</li>
<li>data types</li>
<li>Data structures</li>
<li>lists</li>
<li>factors</li>
<li>dataframes</li>
<li>matrices</li>
<li>functions</li>
<li>applying functions.</li>
</ul>
<p>By the end of the session you should know what each of these terms refers to.</p>
<p>As an aside, the <em>dictionary</em> of programming languages borrows heavily from logic and mathematics. This is especially true for R, which is a language designed with applied mathematics (statistics) in mind. Knowing the mathematical meaning of a word, e.g. a matrix is (imprecisely) a grid of numbers, helps with knowing what R is aiming for.</p>
<p>Let's get started!</p>
<h1 id="variables-and-operators">1. Variables and operators</h1>
<h2 id="variables">1.1. Variables</h2>
<p>A <strong>variable</strong> holds a value, and has a name. The value of a variable can change, hence being variable and not constant. In R we assign a variable using the following symbols <em>&lt;- , -&gt;, = </em>, such symbols are referred to as <strong>operators</strong>, there are lots of different types of operators (more on those later!).</p>
<p>Let's name our variable <em>x</em> and assign it the value 1:</p>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="dv">1</span></code></pre>
<p>If we want to show the contents of x, we will have to use the <em>print()</em> function</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(x)</code></pre>
<pre><code>## [1] 1</code></pre>
<p>The name of a variable should be unique, and can consist of letters, numbers, underline (_) or dots (.). The variable should start with a letter or a dot (this dot cannot followed by a number). Variables cannot start with a number or underline. Can you find which variable name is incorrect?</p>
<ul>
<li>x.1&lt;-1<br /></li>
<li>x_2&lt;-2</li>
<li>.x&lt;-3<br /></li>
<li>4y&lt;-5<br /></li>
<li>_z&lt;-6<br /></li>
<li>_2&lt;-7<br /></li>
<li>.2a&lt;-8*</li>
</ul>
<p>Try each statement out here:</p>
<p>When something is wrong R will print an error message to screen. Make sure to read this message carefully, and to digest and understand the computer speak. If you do not understand then Google away!</p>
<h2 id="data-types">1.2. Data types</h2>
<p>Every variable has a <strong>data type</strong>. The data type of a variable is its defining quality, it is what it is! In R, there are several basic data types that we typically use:</p>
<ul>
<li>character: a</li>
<li>numeric: 2,0, or 5.6</li>
<li>integer: 4L (the L means R will store 4 as integer)</li>
<li>logical: TRUE, FALSE</li>
</ul>
<p>The above datatypes are referred to as <em>atomic</em> in R speak. We will sometimes drop the data part of the word and simply refer to the <strong>type</strong> of a variable when we talk about datatypes.</p>
<p>Create a variable of type character, and name it y. Print it out in the same box:</p>
<p>To show the type of a variable you can use <strong>class()</strong> command. What is the type of <strong>x</strong> from the above example?</p>
<h2 id="operators">1.3. Operators</h2>
<p>We already met assignment operators above e.g. <em>&lt;-</em>. But there are lots of other operators too. Operators connect variables by doing something to them. Perhaps the most obvious example is mathematical operations, which are performed by the <strong>arithmetic operators</strong>.</p>
<h3 id="arithmetic-operators">1.3.1.Arithmetic operators</h3>
<p>We can add, substract, mutiply, divide, equal, expeonent variables in R using the following <strong>arithmetic operators</strong>: +, -, *, /, =, ^</p>
<pre class="sourceCode r"><code class="sourceCode r">math1=<span class="dv">5+6</span>*<span class="dv">8-9+5</span>/<span class="dv">6</span>
<span class="kw">print</span>(math1)</code></pre>
<pre><code>## [1] 44.83333</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">4</span>^<span class="dv">3</span></code></pre>
<pre><code>## [1] 64</code></pre>
<h3 id="relational-operators">1.3.2.Relational operators</h3>
<p><strong>Relational operators</strong> are used to compare variables. The output of such a comparison is a <em>boolean</em> i.e. a <em>TRUE</em> or <em>FALSE</em> value. We can use such operators to test statements such as is z greater than x? First we have to assign z a value:</p>
<pre class="sourceCode r"><code class="sourceCode r">z=<span class="dv">20</span></code></pre>
<p>now let's test our hypothesis:</p>
<pre class="sourceCode r"><code class="sourceCode r">z&gt;x</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>here is a list of operators:</p>
<ul>
<li>&quot;&gt;&quot; greater than</li>
<li>&quot;&lt;&quot; less than</li>
<li>&quot;&gt;=&quot; greater than or equal to</li>
<li>&quot;&lt;=&quot; less than or equal to</li>
<li>&quot;==&quot; equal to</li>
<li>&quot;!=&quot; not equal to</li>
</ul>
<h3 id="logical-operators">1.3.3. Logical operators</h3>
<p>More logic here! You will notice that logic is a recurring theme, as computer languages are rooted in logic, 0s and 1s etc.</p>
<p><em>Logical operators</em> can be used to chain operators together. Again the output is a Boolen <em>TRUE</em> or <em>FALSE</em>. For example, to test if x is greater than 0 and less than 10:</p>
<pre class="sourceCode r"><code class="sourceCode r">x&gt;<span class="dv">0</span> &amp;<span class="st"> </span>x&lt;<span class="dv">10</span></code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>There are 3 operators in the above <strong>syntax</strong> (bit of code). Two relational operators and one logical, which is the &amp; symbol. There is also an or symbol: |.</p>
<p>How do you test if z is greater than 100 <strong>or</strong> greater than 1000?</p>
<h3 id="miscellaneous-operators">1.3.4.Miscellaneous Operators</h3>
<p>There are also a few other operators that don't fit neatly into any other bracket. The colon operator <strong>:</strong> is very handy as it is used to generate a sequence of numbers:</p>
<pre class="sourceCode r"><code class="sourceCode r">x1 &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">10</span>
<span class="kw">print</span>(x1)</code></pre>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>The <strong>%in%</strong> operator can be used to check if the elements that occur in ** A ** also occur in ** B **</p>
<pre class="sourceCode r"><code class="sourceCode r">A&lt;-<span class="dv">1</span>:<span class="dv">10</span>
B&lt;-<span class="dv">3</span>:<span class="dv">6</span>
<span class="kw">print</span>(A%in%B)</code></pre>
<pre><code>##  [1] FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE</code></pre>
<h1 id="data-structures">2. Data structures</h1>
<p>Put simply <strong>data structures</strong> are groups of variables. You can group variables of different data types, however the simplest data structures occur when you group variables of the same type. These simple structures are called <strong>vectors</strong>.</p>
<h2 id="vectors">2.1. Vectors</h2>
<p>A vector is a one dimensional array that can consist of numeric, character,or logical data. All the elements inside a vector should be a single data type only. A vector is formed using function <strong>c()</strong>.</p>
<p>Let's try the following out:</p>
<ol style="list-style-type: decimal">
<li>create a vector named as a, store letters of b to e into a</li>
<li>print a</li>
<li>check data type of a</li>
<li>check the structure of a.</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#(1)create a character vector: a</span>
a&lt;-<span class="kw">c</span>(<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>,<span class="st">&#39;d&#39;</span>,<span class="st">&#39;e&#39;</span>)
<span class="co">#(2)print: a</span>
<span class="kw">print</span>(a)</code></pre>
<pre><code>## [1] &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#(3)check type of a</span>
<span class="kw">class</span>(a)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#(4)check structure of a</span>
<span class="kw">str</span>(a)</code></pre>
<pre><code>##  chr [1:4] &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</code></pre>
<p>The structure command displays the structure of the object in question. In this case <strong>a</strong> is character vector.</p>
<p>You should try the following:</p>
<ol style="list-style-type: decimal">
<li>create a vector named as a1, store first 10 numbers into a1</li>
<li>print a1</li>
<li>check type of a1, and</li>
<li>structure of a1.</li>
</ol>
<h2 id="matrices">2.2. Matrices</h2>
<p>If we extend our concept of a vector into two dimensions we end up with a 2D grid of the same type; this is a <strong>matrix</strong>. Matices are created by the matrix() function:</p>
<pre class="sourceCode r"><code class="sourceCode r">d&lt;-<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">20</span>)
<span class="co">#create a matrix</span>
matr1&lt;-<span class="kw">matrix</span>(d,<span class="dt">nrow =</span> <span class="dv">5</span>,<span class="dt">ncol=</span><span class="dv">4</span>,<span class="dt">byrow =</span> T,
              <span class="dt">dimnames =</span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&#39;r1&#39;</span>,<span class="st">&#39;r2&#39;</span>,<span class="st">&#39;r3&#39;</span>,<span class="st">&#39;r4&#39;</span>,<span class="st">&#39;r5&#39;</span>),
                             <span class="kw">c</span>(<span class="st">&#39;c1&#39;</span>,<span class="st">&#39;c2&#39;</span>,<span class="st">&#39;c3&#39;</span>,<span class="st">&#39;c4&#39;</span>)))
matr1</code></pre>
<pre><code>##    c1 c2 c3 c4
## r1  1  2  3  4
## r2  5  6  7  8
## r3  9 10 11 12
## r4 13 14 15 16
## r5 17 18 19 20</code></pre>
<p>Let's checkout the structure of our matrix:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(matr1)</code></pre>
<pre><code>##  int [1:5, 1:4] 1 5 9 13 17 2 6 10 14 18 ...
##  - attr(*, &quot;dimnames&quot;)=List of 2
##   ..$ : chr [1:5] &quot;r1&quot; &quot;r2&quot; &quot;r3&quot; &quot;r4&quot; ...
##   ..$ : chr [1:4] &quot;c1&quot; &quot;c2&quot; &quot;c3&quot; &quot;c4&quot;</code></pre>
<h2 id="arrays">2.3. Arrays</h2>
<p>An array is similar to a matrix, but can have more than two dimensions. Arrays are created with the <strong>array()</strong> function</p>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="kw">c</span>(<span class="st">&#39;a1&#39;</span>,<span class="st">&#39;a2&#39;</span>,<span class="st">&#39;a3&#39;</span>)
y&lt;-<span class="kw">c</span>(<span class="st">&#39;b1&#39;</span>,<span class="st">&#39;b2&#39;</span>)
z&lt;-<span class="kw">c</span>(<span class="st">&#39;c1&#39;</span>,<span class="st">&#39;c2&#39;</span>,<span class="st">&#39;c3&#39;</span>,<span class="st">&#39;c4&#39;</span>,<span class="st">&#39;c5&#39;</span>)
mydata&lt;-<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">30</span>)
array1&lt;-<span class="kw">array</span>(mydata,<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">5</span>),
<span class="dt">dimnames =</span> <span class="kw">list</span>(x,y,z))
array1</code></pre>
<pre><code>## , , c1
## 
##    b1 b2
## a1  1  4
## a2  2  5
## a3  3  6
## 
## , , c2
## 
##    b1 b2
## a1  7 10
## a2  8 11
## a3  9 12
## 
## , , c3
## 
##    b1 b2
## a1 13 16
## a2 14 17
## a3 15 18
## 
## , , c4
## 
##    b1 b2
## a1 19 22
## a2 20 23
## a3 21 24
## 
## , , c5
## 
##    b1 b2
## a1 25 28
## a2 26 29
## a3 27 30</code></pre>
<h2 id="lists">2.4. Lists</h2>
<p>Next we come to <strong>lists</strong>, these are different to matrices and vectors because they can store objetcts of different type.</p>
<p>Let's make a list containing lots of different types and display the results ...</p>
<pre class="sourceCode r"><code class="sourceCode r">alist&lt;-<span class="kw">list</span>(<span class="kw">c</span>(<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>,<span class="st">&#39;d&#39;</span>,<span class="st">&#39;e&#39;</span>),
            <span class="kw">c</span>(<span class="st">&#39;control&#39;</span>,<span class="st">&#39;control&#39;</span>,<span class="st">&#39;drought&#39;</span>),
            <span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">10</span>),
            <span class="kw">c</span>(1L,3L),
            <span class="dv">88</span>,
            <span class="st">&#39;%&amp;()&#39;</span>,
            <span class="kw">c</span>(<span class="fl">0.3</span>,<span class="fl">2.34</span>,<span class="fl">6.57</span>,<span class="dv">0</span>),
            <span class="dv">3+9</span>,
            <span class="kw">c</span>(<span class="st">&#39;4&#39;</span>,<span class="st">&#39;9&#39;</span>),
            <span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="st">&#39;g&#39;</span>)))
<span class="kw">print</span>(alist)</code></pre>
<pre><code>## [[1]]
## [1] &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;
## 
## [[2]]
## [1] &quot;control&quot; &quot;control&quot; &quot;drought&quot;
## 
## [[3]]
##  [1]  1  2  3  4  5  6  7  8  9 10
## 
## [[4]]
## [1] 1 3
## 
## [[5]]
## [1] 88
## 
## [[6]]
## [1] &quot;%&amp;()&quot;
## 
## [[7]]
## [1] 0.30 2.34 6.57 0.00
## 
## [[8]]
## [1] 12
## 
## [[9]]
## [1] &quot;4&quot; &quot;9&quot;
## 
## [[10]]
## [[10]][[1]]
## [1] &quot;1&quot; &quot;2&quot; &quot;g&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(alist)</code></pre>
<pre><code>## [1] &quot;list&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(alist)</code></pre>
<pre><code>## List of 10
##  $ : chr [1:4] &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;
##  $ : chr [1:3] &quot;control&quot; &quot;control&quot; &quot;drought&quot;
##  $ : int [1:10] 1 2 3 4 5 6 7 8 9 10
##  $ : int [1:2] 1 3
##  $ : num 88
##  $ : chr &quot;%&amp;()&quot;
##  $ : num [1:4] 0.3 2.34 6.57 0
##  $ : num 12
##  $ : chr [1:2] &quot;4&quot; &quot;9&quot;
##  $ :List of 1
##   ..$ : chr [1:3] &quot;1&quot; &quot;2&quot; &quot;g&quot;</code></pre>
<h2 id="advanced-data-structures-dataframes">2.5. Advanced data structures: Dataframes</h2>
<p>It is no exaggeration to say that <strong>Dataframes</strong> are probably the most important data structure used in R. Dataframes are liked matrices, with the key difference being that we can mix up datatypes in the same object. This turns out to be incredibly useful in a number of standard data analysis problems, in short our data is never simple and dataframes take care of this.</p>
<p>Dataframes are generated by the <em>data.frame()</em> function. In a dataframe:</p>
<ul>
<li>the columns are variables</li>
<li>the rows are observations (the row numbers will be object numbers)</li>
<li>all the variables are of same length.</li>
</ul>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#create a dataframe</span>
x=<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">3</span>)
y=<span class="kw">c</span>(<span class="st">&#39;a&#39;</span>,<span class="st">&#39;b&#39;</span>,<span class="st">&#39;c&#39;</span>)
z=<span class="kw">c</span>(<span class="dv">30</span>,<span class="dv">40</span>,<span class="dv">50</span>)
df1&lt;-<span class="kw">data.frame</span>(x,y,z)
<span class="co">#print df1</span>
<span class="kw">print</span>(df1)</code></pre>
<pre><code>##   x y  z
## 1 1 a 30
## 2 2 b 40
## 3 3 c 50</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#check the structure of df1</span>
<span class="kw">str</span>(df1)</code></pre>
<pre><code>## &#39;data.frame&#39;:    3 obs. of  3 variables:
##  $ x: int  1 2 3
##  $ y: Factor w/ 3 levels &quot;a&quot;,&quot;b&quot;,&quot;c&quot;: 1 2 3
##  $ z: num  30 40 50</code></pre>
<p>Try to create a new dataframe called <strong>mydata</strong>. This dataframe should have 2 variables and 4 observations. Mix up the types of the variables:</p>
<h2 id="additional-data-type-factors">2.6 Additional data type: factors</h2>
<p>A <em>factor</em> is a kind of advanced vector, that is useful in some analyses.</p>
<p>All the elements inside a factor are characters. We start by creating a normal character vector:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#create a vector</span>
treatment&lt;-<span class="kw">c</span>(<span class="st">&#39;control&#39;</span>,<span class="st">&#39;control&#39;</span>,<span class="st">&#39;drought&#39;</span>,<span class="st">&#39;nutrient&#39;</span>,<span class="st">&#39;drought&#39;</span>)
<span class="co">#check the type of treatment</span>
<span class="kw">class</span>(treatment)</code></pre>
<pre><code>## [1] &quot;character&quot;</code></pre>
<p>Next we convert our character vector to a factor using the <strong>factor()</strong> function:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#create a factor</span>
treatment.factor&lt;-<span class="kw">factor</span>(treatment)
<span class="co">#check the type</span>
<span class="kw">class</span>(treatment.factor)</code></pre>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<p>The difference between factors and character vectors, is that factors contain levels which can be examined using <strong>levels()</strong> function</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#check levels of treatment.factor</span>
<span class="kw">levels</span>(treatment.factor)</code></pre>
<pre><code>## [1] &quot;control&quot;  &quot;drought&quot;  &quot;nutrient&quot;</code></pre>
<p>R also stores factors as numbers rather than characters, this has some consequences which might not be obvious. See here for more details on factors https://swcarpentry.github.io/r-novice-inflammation/12-supp-factors/</p>
<h1 id="control-flow-if-statements-and-loops">3. Control flow: if statements and loops</h1>
<p>Now that we have defined our basic structures (e.g. vectors) we can start to apply some fancier programming constructs. These fall under the broad category of Control Flow, as they can be used to direct your program.</p>
<p>In R, the body (main bit) of the control flow statement is usually places in curly braces <em>{ code here }</em>. (note howwever that these braces can be omitted if your statement only spans a single line).</p>
<h2 id="the-if-statement">3.1. The if statement</h2>
<p>The <strong>if statement</strong> is one of the most widely used constructs in most programming langauge. Put simply it allows the program to decide whether to do something only if some condition has been fufilled.</p>
<p>For example if x is below some number, we want to print a statement that is true. To achieve this we would do the following:</p>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="dv">10</span>
if (x&lt;<span class="dv">50</span>) {<span class="kw">print</span>(<span class="st">&#39;X is smaller than 5&#39;</span>)}</code></pre>
<pre><code>## [1] &quot;X is smaller than 5&quot;</code></pre>
<p>We use the <strong>else</strong> keyword to chain together multiple clauses. This saves us retyping the whole construct over and over. Try to chain the above example together using the <strong>else</strong> statement:</p>
<p>We can also use a the <em>ifelse()</em> function to achieve a similar result to control flow statements. This works as follows:</p>
<pre class="sourceCode r"><code class="sourceCode r">z&lt;-<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">30</span>)
<span class="kw">ifelse</span> (z==<span class="dv">10</span>|z&gt;<span class="dv">15</span>,<span class="st">&#39;yes&#39;</span>,<span class="st">&#39;no&#39;</span>)</code></pre>
<pre><code>## [1] &quot;no&quot;  &quot;yes&quot; &quot;yes&quot;</code></pre>
<h2 id="loops">3.2. Loops</h2>
<p><em>For loops</em> are programming contructs used to repeat stuff over and over, in programming terms this is referred to as <strong>iteration</strong>. Iteration is at the heart of solving problems using computing, the computer is put to task to repeat tasks that are either boring or impossible for humans to accomplish in a reasonable time frame!</p>
<p>A for loop iterates over a sequence one element at a time. The for loop contains the <em>for</em> statement, a <em>variable</em> in some normal braces, and the body (main bit) of the loop is placed between the curly braces. The body is where the repetiton occurs.</p>
<p>If we take an example, here x.seq is a vector that we plan to iterate over, at each step (iteration) we want to add a new value (y) to the element in x that is the subject of the iteration. At each step we also print the variable.</p>
<pre class="sourceCode r"><code class="sourceCode r">x.seq&lt;-<span class="kw">c</span>(<span class="dv">1</span>:<span class="dv">10</span>)
y&lt;-<span class="dv">2</span>
for (i in x){
 z&lt;-y+x
 <span class="kw">print</span>(z)
}</code></pre>
<pre><code>## [1] 12</code></pre>
<p>Go ahead and write a for loop where we square x, and also print the variable at each step.</p>
<p><em>While loops</em> are similar to for loops, except in these loops iteration continues until some condition is reached. In the following example we keep looping until our x variable hits the value of 8 (10-2), then the loop stops.</p>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="dv">2</span>
while(x&lt;<span class="dv">10</span>) {
  <span class="kw">print</span>(<span class="st">&#39;yes&#39;</span>)
  x=x<span class="dv">+2</span>
  }</code></pre>
<pre><code>## [1] &quot;yes&quot;
## [1] &quot;yes&quot;
## [1] &quot;yes&quot;
## [1] &quot;yes&quot;</code></pre>
<p>There is another type of loop called a <em>repeat loop</em>, these are similar to while loops but to stop the loop we use the keyword <em>break</em> and supply a condition within the loop itself:</p>
<pre class="sourceCode r"><code class="sourceCode r">x&lt;-<span class="dv">9</span>

repeat{
    <span class="kw">print</span> (x)
    x &lt;-<span class="st"> </span>x -<span class="st"> </span><span class="dv">1</span>
    if (x==<span class="dv">8</span>){
    break
    }
    
}</code></pre>
<pre><code>## [1] 9</code></pre>
<p>In most computing languages the above loops are similar in importance to if statements. R is a little different in this respect, as there are different methods of iteration that are just as powerful and sometimes preferable. These alternate iteration methods are the <strong>apply</strong> functions discussed in the next section of the course. For programmers coming from other langauges, it is important to remember that in R, an apply function will typically take the place of a for loop.</p>
<h1 id="functions-and-applying-functions">4. Functions and Applying functions</h1>
<p>Functions are central to the way R works; think of them as the building blocks of larger programs. Just like building blocks, functions are elements of a larger whole. If you want to take the next step beyond writing simple scripts, then functions are your friend!</p>
<p>In simple terms, a function takes an input, does something to it, then returns something else which is the results of that something.<br />In R language, functions consist of <em>arguments</em> which are the input, the <em>body</em> which is the bit where things happen, and the <em>name</em>, which is self evident!</p>
<h2 id="built-in-functions">4.1. Built-in functions</h2>
<p>Most things in R involve functions, typically these are built-in to the language or perhaps part of a package that you have installed.</p>
<p>When you print something to the screen then you are using the <strong>print</strong> function:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="st">&quot;print is a commonly used function!&quot;</span>)</code></pre>
<pre><code>## [1] &quot;print is a commonly used function!&quot;</code></pre>
<p>You can take a look at the contents of a function by typing the function name, but missing out the paranthesis:</p>
<pre class="sourceCode r"><code class="sourceCode r">print</code></pre>
<pre><code>## function (x, ...) 
## UseMethod(&quot;print&quot;)
## &lt;bytecode: 0x235fdf0&gt;
## &lt;environment: namespace:base&gt;</code></pre>
<p>You can get information (help) on any function by placing the question mark operator at the front of a function (e.g &quot;?function&quot;), try it out with print:</p>
<p>The code inside the function is called the <em>body</em>, the input to the functions is referred to as the <em>argument</em>(s).</p>
<p>Sometimes there is more than one function that achieves a similar result. Can you think of another function that prints messages to the screen?</p>
<h2 id="user-defined-functions">4.2. User-defined functions</h2>
<p>Built-in functions allow us to get stuff done, however user-defined functions allow us to build stuff!</p>
<p>Time to make a function. First we need our function to have a purpose. Maybe our instrument has a linear calibration function. The aim of our function is to calculate this calibration using our data i.e. takes an input value, and multiply by a calibration coefficient to yield the calibrated value.</p>
<pre class="sourceCode r"><code class="sourceCode r">cal.eq &lt;-<span class="st"> </span>function(instrument.data,<span class="dt">cal.coeff=</span><span class="fl">2.4</span>){ 
       instrument.data *<span class="st"> </span>cal.coeff
    }</code></pre>
<p>Next we should breakdown the individual parts of our function. The name of the function is <em>cal.eq</em>, the body of the function is the part in between the curly braces. Our function has two input arguments, the first is <em>instrument.data</em>, and the other is our calibration coefficient <em>cal.coeff</em> which is set to a default value of 2.4.</p>
<p>Now try to test out the function with some data, x &lt;- c(1:10)</p>
<p>One important note about functions; the output of an R function is whatever is calculated on the last line of the body. In our case we only have one line so that is what we get back.</p>
<h2 id="the-apply-family-and-anonymous-functions">4.3. The apply family and anonymous functions</h2>
<p>The <em>apply</em> family are a special group of functions that most R users are familiar with. In essence apply functions are similar to for loops, in fact in R when you find yourself reaching for a for-loop we often ask ourselves can we use apply instead?</p>
<p>Apply functions iterate (repeat) a function over a datastructure. Let's walk though an example. we can use the <em>paste</em> function to join two characters together e.g. 'hi ' and 'there'</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">paste</span>(<span class="st">&#39;hi &#39;</span>,<span class="st">&#39;there&#39;</span>)</code></pre>
<pre><code>## [1] &quot;hi  there&quot;</code></pre>
<p>We could use apply to paste 'hi' to a vector of different words. We do this by defining a new <em>anonymous</em> function within the apply call. An <em>anonymous</em> function is simply a function with no name! Let's use the lapply function, as this is designed to work on vectors</p>
<pre class="sourceCode r"><code class="sourceCode r">sentenc.e &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;This &quot;</span>,<span class="st">&quot; is a &quot;</span>, <span class="st">&quot; setence.&quot;</span> )


<span class="co"># now lets use apply to mess up our sentence!</span>

nonsense &lt;-<span class="st"> </span><span class="kw">lapply</span>(sentenc.e, function(input) <span class="kw">paste</span>(input,<span class="st">&quot; oops &quot;</span>)  )  </code></pre>
<p>We have now turned out sentence into nonsense! However if you inspect the <em>class()</em> of nonsense you will notice that it is a list!</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(nonsense)</code></pre>
<pre><code>## [[1]]
## [1] &quot;This   oops &quot;
## 
## [[2]]
## [1] &quot; is a   oops &quot;
## 
## [[3]]
## [1] &quot; setence.  oops &quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(nonsense)</code></pre>
<pre><code>## [1] &quot;list&quot;</code></pre>
<p>This is because lapply returns a list. Lists are a little tricky to work with. To convert back to a vector you can use another function:</p>
<pre class="sourceCode r"><code class="sourceCode r">nonsense &lt;-<span class="st"> </span><span class="kw">unlist</span>(nonsense)</code></pre>
<p>Now we have a character vector, just like our original sentence.</p>
<p>In R there are a bunch of apply functions, each one is intended for slighly different inputs and outputs. Here are a few that you may come across:</p>
<ul>
<li>lapply: input are vectors and lists. Outputs are list</li>
<li>sapply: input are vectors and lists. Outputs are &quot;user friendly&quot;</li>
<li>mapply: multivariate version of sapply. Outputs are &quot;user friendly&quot;</li>
</ul>
<p>what is the difference in using sapply over lapply in the example above?</p>
<h1 id="other-stuff">5. Other stuff</h1>
<p>We have only scratched the very basics of R in this tutorial, there is whole world of resources out there! Many of them free due to R's ethos as an open source language. For programmers coming from other languages, be sure to check out <em>The R inferno</em>. There are also a bunch of online tutorials for you to follow should you have time, Google is your friend here!</p>
<h2 id="installing-packages">5.1 installing packages</h2>
<p>Functions are bundled together in packages (libraries). Each package has a general theme e.g. ggplot2 is for improved plotting capabilites. You can download packages using the <em>install.packages</em> function.</p>
